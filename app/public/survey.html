<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- style and links -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        h1,
        h2 {
            text-align: center;
        }

        .row {
            text-align: center;
        }

        .alert{
            background-color: #c82333;
            color: white;
            margin: 0;
        }

        .friend{
            background-color: #007bff;
            color: white;
            margin: 0;
        }

    </style>
    <title>Friend Finder</title>
</head>

<body>


    <div class="container">
        
        <!-- Alert Modal -->
        <div class="modal" id="alertModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header alert">
                        <h5 class="modal-title alert">ALERT</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p id="modal-content">Please fill out all fields before submitting!</p>
                    </div>
                </div>
            </div>
        </div>

         <!-- Friend Modal -->
         <div class="modal" id="friendModal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header friend">
                            <h5 class="modal-title friend">Your new friend!</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <h4 id="friendName"></h4>
                            <img id="friendImage" src=""></img>
                        </div>
                    </div>
                </div>
            </div>

        <!-- survey questions -->
        <h1>Survey</h1>
        <hr>
        <form>
            <div class="form-group">
                <label>
                    <h3>Your Name (required)</h3>
                </label>
                <input type="text" class="form-control" id="name" aria-describedby="name">
            </div>
            <div class="form-group">
                <label>
                    <h3>Image URL (required)</h3>
                </label>
                <input type="text" class="form-control" id="imageURL" aria-describedby="name">
            </div>
            <div class="form-group" id="q1">
                <h3>Question 1: I prefer to spend time outdoors.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q1Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q1Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q1Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q1Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q1Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q2">
                <h3>Question 2: I enjoy caring for animals.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q2Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q2Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q2Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q2Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q2Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="form-group" id="q3">
                <h3>Question 3: It's fun to try out new, exotic foods.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q3Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q3Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q3Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q3Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q3Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="form-group" id="q4">
                <h3>Question 4: I prefer loud, upbeat music.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q4Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q4Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q4Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q4Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q4Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>
            <div class="form-group" id="q5">
                <h3>Question 5: I'm always busy and I like it that way.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q5Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q5Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q5Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q5Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q5Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q6">
                <h3>Question 6: Science is one of my favorite topics.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q6Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q6Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q6Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q6Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q6Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q7">
                <h3>Question 7: I hate changes in my routine.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q7Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q7Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q7Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q7Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q7Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q8">
                <h3>Question 8: I love to read.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q8Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q8Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q8Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q8Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q8Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q9">
                <h3>Question 9: I work out and do other fitness activities regularly.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q9Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q9Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q9Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q9Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q9Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>

            <div class="form-group" id="q10">
                <h3>Question 10: I love being around lots of people.</h3>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q10Options" value="1">
                    <label>1 (Strongly Disagree)</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q10Options" value="2">
                    <label>2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q10Options" value="3">
                    <label>3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q10Options" value="4">
                    <label>4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="q10Options" value="5">
                    <label>5 (Strongly Agree)</label>
                </div>
            </div>
            <button type="submit" class="btn btn-lg btn-primary" id="submitBtn">Submit</button>
        </form>
    </div>

    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script text="text/javascript">
        //confirms if all inputs filled
        function valid(newFriend) {
            //checks to see if text fields full
            for (const property in newFriend) {
                if (newFriend[property] === "") {
                    newFriend = {};
                    return false;
                }
            }
            //checks to see if radio buttons unchecked
            for (let i = 0; i < newFriend.scores.length; i++) {
                if (newFriend.scores[i] === undefined) {
                    return false;
                }
            }

            return true;

        };

        //modal close button
        $(".close").on("click", function(event){

            event.preventDefault();
            $(".modal").hide();

        });

        //creates new object based on user input
        $("#submitBtn").on("click", function (event) {
            event.preventDefault();
            var newFriend = {
                "name": $("#name").val().trim(),
                "photo": $("#imageURL").val().trim(),
                "scores": [$("input[name*='q1Options']:checked").val(),
                $("input[name*='q2Options']:checked").val(),
                $("input[name*='q3Options']:checked").val(),
                $("input[name*='q4Options']:checked").val(),
                $("input[name*='q5Options']:checked").val(),
                $("input[name*='q6Options']:checked").val(),
                $("input[name*='q7Options']:checked").val(),
                $("input[name*='q8Options']:checked").val(),
                $("input[name*='q9Options']:checked").val(),
                $("input[name*='q10Options']:checked").val()]
            };

            //prevents empty fields in new friend object
            if (!valid(newFriend)) {
                $("#alertModal").show();
            } else {
                $.post("/api/friends", newFriend).then(function (data) {
                    $("#friendModal").show();
                    $("#friendName").text(data.name);
                    $("#friendImage").attr("src", data.photo);
                });

            }
        });
    </script>
</body>

</html>